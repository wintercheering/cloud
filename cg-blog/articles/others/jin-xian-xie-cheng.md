# 详述“进程、线程和协程”的区别

首先，给出“进程、线程和协程”的特点：

 - **进程**：拥有自己独立的堆和栈，既不共享堆，也不共享栈，进程由操作系统调度；
 - **线程**：拥有自己独立的栈和共享的堆，共享堆，不共享栈，标准线程由操作系统调度；
 - **协程**：拥有自己独立的栈和共享的堆，共享堆，不共享栈，协程由程序员在协程的代码里显示调度。

接下来，以一个形象的例子，进一步讲述“进程、线程和协程”三者之间的区别：

假设有一个单核的操作系统，系统上没有其它的程序需要运行，现有两个线程 A 和 B，A 和 B 在单独运行时都需要 10 秒来完成自己的任务，而且任务都是运算操作，线程 A 和 B 之间没有竞争和共享数据的问题。现在让 A 和 B 两个线程并行，则操作系统会不停的在 A 和 B 两个线程之间切换，达到一种伪并行的效果。

如果操作系统切换的频率是每秒一次，切换的成本是 0.1 秒（主要是栈切换），则总共需要 20 + 19 * 0.1 = 21.9 秒；如果使用协程的方式，可以先运行协程 A，A 结束的时候让位给协程 B，只发生一次切换，则总共需要  20 + 1 * 0.1 = 20.1 秒。如果操作系统是双核的，而且线程是标准线程，那么线程 A 和 B 可以达到真的并行，则总时间为 10 秒；而协程的方式仍然需要 20.1 秒的时间。
